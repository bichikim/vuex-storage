!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash"),require("cookie")):"function"==typeof define&&define.amd?define("vuex-storage",["lodash","cookie"],t):"object"==typeof exports?exports["vuex-storage"]=t(require("lodash"),require("cookie")):e["vuex-storage"]=t(e.lodash,e.cookie)}(this,function(e,t){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/*! no static exports found */
/*! exports used: cloneDeep, merge, omit, pick */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,o){t.exports=e},
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/*! no static exports found */
/*! exports used: parse, serialize */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,o){e.exports=t},
/*!****************************!*\
  !*** multi ./src/index.ts ***!
  \****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,o){e.exports=o(/*! ./src/index.ts */3)},
/*!**********************************!*\
  !*** ./src/index.ts + 1 modules ***!
  \**********************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with external "cookie" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "lodash" (<- Module is not an ECMAScript module) */function(e,t,o){"use strict";o.r(t);var i=o(0),r=o(1),n=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=!0),this._init=!1;var o=e.req,i=e.res;this._req=o,this._res=i,this._isClient=t,this._updateCookie(),this._init=!0}return Object.defineProperty(e.prototype,"isClient",{get:function(){return this._isClient},enumerable:!0,configurable:!0}),e.prototype.get=function(e,t){this._updateCookie();var o=this._cookies[e];try{return JSON.parse(o)}catch(e){return o}},e.prototype.remove=function(e,t){delete this._cookies[e],this._saveCookie(e,"",t)},e.prototype.set=function(e,t,o){var i=t;"object"==typeof i&&(i=JSON.stringify(t)),this._cookies[e]=t,this._saveCookie(e,i,o)},e.prototype._updateCookie=function(){if(this.isClient)this._cookies=r.parse(document.cookie);else{this._cookies={};var e=this._req;if(e&&e.headers){var t=e.headers.cookie||e.cookies;this._cookies="object"==typeof t?t:r.parse(t)}var o=this._res,n=o&&o.getHeader("set-cookie");n&&(this._cookies=Object(i.merge)(this._cookies,r.parse(n.toString())))}},e.prototype._saveCookie=function(e,t,o){var i=r.serialize(e,t||"",o);if(this.isClient)document.cookie=i;else{this._req;var n=this._res;if(n){var s=new RegExp("^"+e+"="),c=n.getHeader("set-cookie"),a=[];c&&c.toString().split(";").forEach(function(e){s.test(e)||a.push(e)}),t&&a.push(i),n.setHeader("set-cookie",a.join("; "))}}},e}(),s=function(){return(s=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function c(e,t,o){var r=Object(i.cloneDeep)(e),n={};return n=t?Object(i.omit)(r,t):r,o&&(n=Object(i.pick)(n,o)),n}var a=function(){return function(e){void 0===e&&(e={});var t=this,o=e.cookie,r=e.restore,a=void 0===r||r,u=e.isRun,f=e.strict,p=void 0!==f&&f,l=e.key,d=void 0===l?"vuex":l,v=e.local,h=e.mutationName,y=void 0===h?"__RESTORE_MUTATION":h,_=e.session,g=e.storageFirst,b=void 0===g||g,m=e.clientSide;u&&console.warn("please do not use the isRun option");var k=function(){return"function"==typeof m?m(t._store,e):"boolean"==typeof m?m:"object"==typeof document};this.mutationName=y,this.mutation=function(e,t){var o=this;Object.keys(t).forEach(function(i){o._vm.$set(e,i,t[i])})},this.clear=function(e){if(new n(e,k()).set(d,{},{path:"/"}),k()){var t=window.sessionStorage,o=window.localStorage;t.setItem(d,"{}"),o.setItem(d,"{}")}},this.restore=function(e){var r=t._store,s={};o&&(s=c(new n(e,k()).get(d),o.except,o.only));var a={},u={};if(k()){var f=window.sessionStorage,l=window.localStorage,h="{}",g="{}";_&&(h=f.getItem(d)||"{}",a=c(JSON.parse(h),_.except,_.only)),v&&(g=l.getItem(d)||"{}",u=c(JSON.parse(g),v.except,v.only))}var m=Object(i.merge)(a,u,s),O=Object(i.cloneDeep)(r.state);m=b?Object(i.merge)(O,m):Object(i.merge)(m,O),p?r.commit(y,m):r.replaceState(m)},this.save=function(e,i){t.clear();var r=new n(i,k());if(o&&r){var a=o.options,u=void 0===a?{}:a;r.set(d,c(e,o.except,o.only),s({path:"/"},u))}if(k()){var f=window.sessionStorage,p=window.localStorage;_&&f.setItem(d,JSON.stringify(c(e,_.except,_.only))),v&&p.setItem(d,JSON.stringify(c(e,v.except,v.only)))}},this.nuxtServerInit=function(e,o){a&&t.restore(o),t.save(t._store.state,o)},this.plugin=function(e){if(t._store)throw new Error("plugin install twice");t._store=e;var o=function(e){a&&t.restore(),t.save(e.state),e.subscribe(function(e,o){t.save(o)})};k()&&window.onNuxtReady?window.onNuxtReady(function(){return o(e)}):process.server||o(e)}}}();t.default=a}])});
//# sourceMappingURL=app.js.map